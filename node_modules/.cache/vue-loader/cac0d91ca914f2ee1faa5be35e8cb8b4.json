{"remainingRequest":"D:\\a-my-html\\html-Vue\\VUE\\VUE-project\\腾讯云\\新建文件夹\\infiniteLoop\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\a-my-html\\html-Vue\\VUE\\VUE-project\\腾讯云\\新建文件夹\\infiniteLoop\\src\\views\\TopicLong.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"D:\\a-my-html\\html-Vue\\VUE\\VUE-project\\腾讯云\\新建文件夹\\infiniteLoop\\src\\views\\TopicLong.vue","mtime":1624791998188},{"path":"D:\\a-my-html\\html-Vue\\VUE\\VUE-project\\腾讯云\\新建文件夹\\infiniteLoop\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-my-html\\html-Vue\\VUE\\VUE-project\\腾讯云\\新建文件夹\\infiniteLoop\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\a-my-html\\html-Vue\\VUE\\VUE-project\\腾讯云\\新建文件夹\\infiniteLoop\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\a-my-html\\html-Vue\\VUE\\VUE-project\\腾讯云\\新建文件夹\\infiniteLoop\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-my-html\\html-Vue\\VUE\\VUE-project\\腾讯云\\新建文件夹\\infiniteLoop\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\a-my-html\\html-Vue\\VUE\\VUE-project\\腾讯云\\新建文件夹\\infiniteLoop\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLnRvcGljLWxvbmcgew0KICAudG9waWMtbWFpbiB7DQogICAgLnRvcGljLXRvcCB7DQogICAgICBtYXJnaW4tdG9wOiAzMHB4Ow0KICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICMzMzM7DQogICAgICBwYWRkaW5nOiA4cHggMDsNCiAgICAgIHBhZGRpbmctYm90dG9tOiAxNXB4Ow0KICAgICAgc3Bhbi50eXBlIHsNCiAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICBwYWRkaW5nOiAycHggNHB4Ow0KICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNmY3NTc5Ow0KICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDsNCiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4Ow0KICAgICAgfQ0KICAgICAgc3Bhbi50aXRsZSB7DQogICAgICAgIGZvbnQtc2l6ZTogMjJweDsNCiAgICAgICAgZm9udC13ZWlnaHQ6IDcwMDsNCiAgICAgICAgbWFyZ2luOiA4cHggMDsNCiAgICAgICAgbGluZS1oZWlnaHQ6IDM1cHg7DQogICAgICB9DQogICAgICAudGl0bGUtYm90dG9tIHsNCiAgICAgICAgZGlzcGxheTogZmxleDsNCiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgICAgICAvLyBsaW5lLWhlaWdodDogNDBweDsNCiAgICAgICAgYnV0dG9uIHsNCiAgICAgICAgICBtYXJnaW4tdG9wOiA3cHg7DQogICAgICAgICAgaGVpZ2h0OiAyOHB4Ow0KICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgICBsaW5lLWhlaWdodDogMTRweDsNCiAgICAgICAgICBwYWRkaW5nOiA1cHggMTBweDsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgLmVkaXQtdG9waWMgew0KICAgICAgICBzcGFuIHsNCiAgICAgICAgICBtYXJnaW4tbGVmdDogOHB4Ow0KICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICBjb2xvcjogIzgzODM4MzsNCiAgICAgICAgICBmb250LXdlaWdodDogNTAwOw0KICAgICAgICB9DQogICAgICAgIHNwYW46aG92ZXIgew0KICAgICAgICAgIGNvbG9yOiAjMzMzOw0KICAgICAgICB9DQogICAgICB9DQogICAgICB1bCB7DQogICAgICAgIG1hcmdpbjogNXB4IDA7DQogICAgICAgIHBhZGRpbmc6IDA7DQogICAgICAgIGxpIHsNCiAgICAgICAgICBtYXJnaW46IDhweDsNCiAgICAgICAgICBsaXN0LXN0eWxlOiBkaXNjOw0KICAgICAgICAgIGxpc3Qtc3R5bGUtcG9zaXRpb246IGluc2lkZTsNCiAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgICAgICAgZm9udC1zaXplOiAxMnB4Ow0KICAgICAgICAgIGNvbG9yOiAjODM4MzgzOw0KICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxNnB4Ow0KICAgICAgICAgIHNwYW4gew0KICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOw0KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogM3B4Ow0KICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiA0cHg7DQogICAgICAgICAgICB3aWR0aDogNHB4Ow0KICAgICAgICAgICAgaGVpZ2h0OiA0cHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjODM4MzgzOw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICAudG9waWMtY29udGVudCB7DQogICAgICBjb2xvcjogIzMzMzsNCiAgICAgIC5tYXJrZG93bi10ZXh0IHsNCiAgICAgICAgcCB7DQogICAgICAgICAgbGluZS1oZWlnaHQ6IDEuN2VtOw0KICAgICAgICAgIGZvbnQtc2l6ZTogMTVweDsNCiAgICAgICAgfQ0KICAgICAgICB1bCB7DQogICAgICAgICAgbGkgew0KICAgICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgbGlzdC1zdHlsZTogZGlzYzsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyOHB4Ow0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBoMSwNCiAgICAgICAgaDIgew0KICAgICAgICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZWVlOw0KICAgICAgICAgIGxpbmUtaGVpZ2h0OiA0MHB4Ow0KICAgICAgICB9DQogICAgICAgIGltZyB7DQogICAgICAgICAgbWF4LXdpZHRoOiAxMDAlOw0KICAgICAgICAgIGhlaWdodDogYXV0bzsNCiAgICAgICAgfQ0KICAgICAgICBhIHsNCiAgICAgICAgICBjb2xvcjogIzZmNzU3OTsNCiAgICAgICAgfQ0KICAgICAgICBhOmhvdmVyIHsNCiAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICAudG9waWMtY29tbWVudHMgew0KICAgICAgbWFyZ2luLXRvcDogMzBweDsNCiAgICAgIC5tYWluLWN1bnRlbnQgew0KICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjOw0KICAgICAgICAudG9waWMtY29tbWVudCB7DQogICAgICAgICAgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNmMGYwZjA7DQogICAgICAgICAgLmF1dGhvci1jdW50ZW50IHsNCiAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTsNCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOw0KICAgICAgICAgICAgaW1nIHsNCiAgICAgICAgICAgICAgd2lkdGg6IDMwcHg7DQogICAgICAgICAgICAgIGhlaWdodDogMzBweDsNCiAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogM3B4Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLnVzZXItaW5mbyB7DQogICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsNCiAgICAgICAgICAgICAgdG9wOiAxMHB4Ow0KICAgICAgICAgICAgICBsZWZ0OiA1MHB4Ow0KICAgICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7DQogICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgICAgICAgLm5hbWUgew0KICAgICAgICAgICAgICAgIGNvbG9yOiAjNjY2Ow0KICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgLm5hbWU6aG92ZXIgew0KICAgICAgICAgICAgICAgIGNvbG9yOiAjMzg1ZjhhOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIC50aW1lIHsNCiAgICAgICAgICAgICAgICBjb2xvcjogIzA4YzsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAudGltZTpob3ZlciB7DQogICAgICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgLmlmYXV0aG9yIHsNCiAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMTBweDsNCiAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHggNXB4Ow0KICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDNweDsNCiAgICAgICAgICAgICAgICBjb2xvcjogd2hpdGU7DQogICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzZmNzU3OTsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLmF1dGhvci1yaWdodCB7DQogICAgICAgICAgICAgIHNwYW4gew0KICAgICAgICAgICAgICAgIGNvbG9yOiAjOTI5NzkwOw0KICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTRweDsNCiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNjAwOw0KICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogNXB4Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIC5lbC1pY29uLXRodW1iLA0KICAgICAgICAgICAgICAuZWwtaWNvbi1jaGF0LXJvdW5kIHsNCiAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgLmFjdGl2ZSB7DQogICAgICAgICAgICAgICAgY29sb3I6ICMwMDA7DQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgICAgLnJlcGx5LWN1bnRlbnQgew0KICAgICAgICAgICAgLy8gb3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgICAgICAgIHAgew0KICAgICAgICAgICAgICBwYWRkaW5nLXJpZ2h0OiAxNXB4Ow0KICAgICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDMycHg7DQogICAgICAgICAgICAgIG1hcmdpbi10b3A6IC0yMHB4Ow0KICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAyNXB4Ow0KICAgICAgICAgICAgICBpbWcgew0KICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAlOw0KICAgICAgICAgICAgICAgIGhlaWdodDogYXV0bzsNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICAuY29tbWVudHJlcGx5IHsNCiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7DQogICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDUwcHg7DQogICAgICAgICAgICAudG94LXRpbnltY2Ugew0KICAgICAgICAgICAgICBib3JkZXI6IG5vbmU7DQogICAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCAjY2NjOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLnRveC1zdGF0dXNiYXIgew0KICAgICAgICAgICAgICBkaXNwbGF5OiBub25lOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgLmVkaXRvci1idXR0b20gew0KICAgICAgICAgICAgICBoZWlnaHQ6IDQwcHg7DQogICAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDE1cHg7DQogICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7DQogICAgICAgICAgICAgIGJ1dHRvbiB7DQogICAgICAgICAgICAgICAgZmxvYXQ6IHJpZ2h0Ow0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIC5hZGQtY29tbWVudCB7DQogICAgICBtYXJnaW4tdG9wOiAzMHB4Ow0KICAgICAgLmVkaXRvci1idXR0b20gew0KICAgICAgICBwYWRkaW5nOiA4cHggMDsNCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["TopicLong.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TopicLong.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div class=\"topic-long\">\r\n    <HomeNav>/ 文章</HomeNav>\r\n    <div v-if=\"topic !== ''\" class=\"topic-main\">\r\n      <div class=\"topic-top\">\r\n        <span class=\"type\">{{ topic.data | getTitleType }}</span>\r\n        <span class=\"title\">{{ topic.data.title }}</span>\r\n        <div class=\"title-bottom\">\r\n          <ul>\r\n            <li><span />发布于{{ topic.data.create_at | FromNow }}</li>\r\n            <li\r\n              class=\"authorNews\"\r\n              @click=\"userDetails(topic.data.author.loginname)\"\r\n            >\r\n              <span />作者{{ topic.data.author.loginname }}\r\n            </li>\r\n            <li><span />{{ topic.data.visit_count }}次浏览</li>\r\n            <li>\r\n              <span />最后一次编辑是{{ topic.data.last_reply_at | FromNow }}\r\n            </li>\r\n            <li><span />来自{{ topic.data | fromWhere }}</li>\r\n          </ul>\r\n          <!-- 收藏按钮 -->\r\n          <el-button\r\n            @click=\"addCollection()\"\r\n            v-if=\"singUp.userall\"\r\n            type=\"info\"\r\n            size=\"small\"\r\n          >\r\n            {{ topic.data.is_collect ? \"取消收藏\" : \"收藏\" }}\r\n          </el-button>\r\n        </div>\r\n        <div\r\n          v-if=\"\r\n            singUp.userall !== null &&\r\n            topic.data.author_id === singUp.userall.id\r\n          \"\r\n          class=\"edit-topic\"\r\n        >\r\n          <span @click=\"clickEdit()\" title=\"编辑\" class=\"el-icon-edit\"></span>\r\n        </div>\r\n      </div>\r\n      <div class=\"topic-content\" v-html=\"topic.data.content\"></div>\r\n      <div class=\"topic-comments\">\r\n        <!-- 评论区 -->\r\n        <LittleHeader>{{ topic.data.replies.length }} 回复</LittleHeader>\r\n        <div class=\"main-cuntent\">\r\n          <div\r\n            v-for=\"(ele, index) in topic.data.replies\"\r\n            :key=\"ele.id\"\r\n            class=\"topic-comment\"\r\n          >\r\n            <div class=\"author-cuntent\">\r\n              <div class=\"author-left\">\r\n                <img\r\n                  class=\"authorNews\"\r\n                  @click=\"userDetails(ele.author.loginname)\"\r\n                  :title=\"ele.author.loginname\"\r\n                  :src=\"ele.author.avatar_url\"\r\n                  alt=\"\"\r\n                />\r\n                <div class=\"user-info\">\r\n                  <a class=\"name\" href=\"#\">{{ ele.author.loginname }}</a\r\n                  ><a class=\"time\" href=\"#addcomment\">\r\n                    {{ index + 1 }}楼 {{ ele.create_at | FromNow }}</a\r\n                  >\r\n                  <span\r\n                    v-if=\"ele.author.loginname === topic.data.author.loginname\"\r\n                    class=\"ifauthor\"\r\n                    >作者</span\r\n                  >\r\n                </div>\r\n              </div>\r\n              <!-- 评论操作 -->\r\n              <div class=\"author-right\">\r\n                <span\r\n                  @click=\"commentUps(ele, index)\"\r\n                  title=\"点赞\"\r\n                  :class=\"\r\n                    ele.is_uped ? 'el-icon-thumb active' : 'el-icon-thumb'\r\n                  \"\r\n                ></span>\r\n                <span>{{ ele.ups.length }}</span>\r\n                <span\r\n                  @click=\"replyComment(index)\"\r\n                  title=\"回复\"\r\n                  class=\"el-icon-chat-round\"\r\n                ></span>\r\n              </div>\r\n            </div>\r\n            <div class=\"reply-cuntent\">\r\n              <p v-html=\"ele.content\"></p>\r\n            </div>\r\n            <div :class=\"`commentreply  editor${index}`\">\r\n              <editor\r\n                api-key=\"9mieih2cqsubf30b1omff3w107ojvjfvzhmb7haq4giiy754\"\r\n                v-model=\"repliesComment\"\r\n                :init=\"{\r\n                  height: 250,\r\n                  menubar: false,\r\n                  language: 'zh_CN',\r\n                  resize: 'false',\r\n                  plugins: [\r\n                    'advlist autolink lists link image charmap print preview anchor',\r\n                    'searchreplace visualblocks code fullscreen',\r\n                    'insertdatetime media table paste code help wordcount ',\r\n                  ],\r\n                  toolbar:\r\n                    'undo redo | formatselect | bold italic backcolor | \\\r\n           alignleft aligncenter alignright alignjustify | \\\r\n           bullist numlist outdent indent | removeformat | help',\r\n                }\"\r\n              />\r\n              <div class=\"editor-buttom\">\r\n                <el-button\r\n                  @click=\"replyIs(ele, index)\"\r\n                  :plain=\"true\"\r\n                  type=\"info\"\r\n                  >回复</el-button\r\n                >\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"add-comment\" id=\"addcomment\">\r\n        <LittleHeader>添加回复</LittleHeader>\r\n        <div class=\"add-main\">\r\n          <editor\r\n            api-key=\"9mieih2cqsubf30b1omff3w107ojvjfvzhmb7haq4giiy754\"\r\n            v-model=\"addCommentInput\"\r\n            :init=\"{\r\n              height: 350,\r\n              menubar: false,\r\n              language: 'zh_CN',\r\n              resize: 'false',\r\n              plugins: [\r\n                'advlist autolink lists link image charmap print preview anchor',\r\n                'searchreplace visualblocks code fullscreen',\r\n                'insertdatetime media table paste code help wordcount ',\r\n              ],\r\n              toolbar:\r\n                'undo redo | formatselect | bold italic backcolor | \\\r\n           alignleft aligncenter alignright alignjustify | \\\r\n           bullist numlist outdent indent | removeformat | help',\r\n            }\"\r\n          />\r\n          <div class=\"editor-buttom\">\r\n            <el-button @click=\"addSelfComment()\" :plain=\"true\" type=\"info\"\r\n              >回复</el-button\r\n            >\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport HomeNav from \"../components/HomeNav.vue\";\r\nimport LittleHeader from \"../components/LittleHeader.vue\";\r\nimport Editor from \"@tinymce/tinymce-vue\";\r\nimport { mapMutations, mapState } from \"vuex\";\r\nexport default {\r\n  components: { HomeNav, LittleHeader, editor: Editor },\r\n  data() {\r\n    return {\r\n      topic: \"\",\r\n      addCommentInput: \"\",\r\n      repliesComment: \"\",\r\n      addType: \"\",\r\n    };\r\n  },\r\n  created() {\r\n    // console.log(this.$route.params.id);\r\n    this.getTopic();\r\n    // this.allCollect();\r\n    // console.log(this.topic);\r\n  },\r\n  computed: {\r\n    ...mapState([\"singUp\"]),\r\n  },\r\n  methods: {\r\n    //获取文章数据并获取是否收藏点赞。\r\n    async getTopic() {\r\n      const res = await axios.get(\r\n        `/topic/${this.$route.params.id}?accesstoken=${sessionStorage.getItem(\r\n          \"accesstoken\"\r\n        )}`\r\n      );\r\n      this.topic = res;\r\n      // console.log(res);\r\n    },\r\n    // 添加评论\r\n    async addComment(ele) {\r\n      // 点击获取到评论;\r\n      //判断是否为空\r\n      if (this.addCommentInput !== \"\" || this.repliesComment !== \"\") {\r\n        var activeEditor = tinymce.activeEditor;\r\n        var editBody = activeEditor.getBody();\r\n        activeEditor.selection.select(editBody);\r\n        this.addCommentInput = activeEditor.selection.getContent({\r\n          format: \"text\",\r\n        });\r\n        this.repliesComment = activeEditor.selection.getContent({\r\n          format: \"text\",\r\n        });\r\n        // console.log(this.addCommentInput);\r\n        if (sessionStorage.getItem(\"accesstoken\") !== null) {\r\n          let commentText = {};\r\n          if (this.addType === \"only\") {\r\n            commentText = {\r\n              accesstoken: sessionStorage.getItem(\"accesstoken\"),\r\n              content: this.addCommentInput,\r\n            };\r\n          } else if (this.addType === \"other\") {\r\n            commentText = {\r\n              accesstoken: sessionStorage.getItem(\"accesstoken\"),\r\n              content: `@${ele.author.loginname} ${this.repliesComment}`,\r\n              reply_id: ele.reply_id,\r\n            };\r\n            // console.log(\"发布了评论\");\r\n          }\r\n          const res = await axios.post(\r\n            `/topic/${this.topic.data.id}/replies`,\r\n            commentText\r\n          );\r\n          if (res.success) {\r\n            //不重新发送请求很难完美更新数据。\r\n            const res = await axios.get(`/topic/${this.$route.params.id}`);\r\n            this.topic = res;\r\n            this.addCommentInput = \"\";\r\n            this.repliesComment = \"\";\r\n            this.$message({\r\n              message: \"恭喜你，成功发布了一条评论\",\r\n              type: \"success\",\r\n            });\r\n          }\r\n          // console.log(res);\r\n        } else {\r\n          this.$message({\r\n            message: \"请先登陆，再进行评论\",\r\n            type: \"warning\",\r\n          });\r\n        }\r\n      } else {\r\n        this.$message({\r\n          message: \"评论内容不能为空哦\",\r\n          type: \"warning\",\r\n        });\r\n      }\r\n    },\r\n    addSelfComment() {\r\n      this.addType = \"only\";\r\n      this.addComment();\r\n    },\r\n    // 评论点赞\r\n    async commentUps(ele, index) {\r\n      if (sessionStorage.getItem(\"accesstoken\")) {\r\n        //判断是否是自己\r\n        if (ele.author.loginname !== this.singUp.userall.loginname) {\r\n          const res = await axios.post(`/reply/${ele.id}/ups`, {\r\n            accesstoken: sessionStorage.getItem(\"accesstoken\"),\r\n          });\r\n          if (res.action === \"up\") {\r\n            this.topic.data.replies[index].ups.push(1);\r\n            this.topic.data.replies[index].is_uped = true;\r\n          } else {\r\n            this.topic.data.replies[index].is_uped = false;\r\n            this.topic.data.replies[index].ups.pop();\r\n          }\r\n        } else {\r\n          this.$message({\r\n            message: \"亲，不能给自己点赞哦\",\r\n            type: \"warning\",\r\n          });\r\n        }\r\n      } else {\r\n        this.$message({\r\n          message: \"请先登陆，再进行点赞\",\r\n          type: \"warning\",\r\n        });\r\n      }\r\n    },\r\n    //回复评论\r\n    replyComment(index) {\r\n      if (sessionStorage.getItem(\"accesstoken\")) {\r\n        document.querySelector(`.editor${index}`).style.display = \"block\";\r\n      } else {\r\n        this.$message({\r\n          message: \"请先登陆，再回复评论\",\r\n          type: \"warning\",\r\n        });\r\n      }\r\n    },\r\n    replyIs(ele, index) {\r\n      this.addType = \"other\";\r\n      this.addComment(ele);\r\n      document.querySelector(`.editor${index}`).style.display = \"none\";\r\n    },\r\n    //作者详情\r\n    ...mapMutations([\"getUserDetails\", \"getEditTopic\"]),\r\n    userDetails(user) {\r\n      this.getUserDetails(user);\r\n\r\n      this.$router.push(`/user/${user}`);\r\n    },\r\n    //收藏功能\r\n    // 获取用户收藏列表\r\n    async allCollect() {\r\n      const res = await axios.get(\r\n        `/topic_collect/${this.topic.data.author.loginname}`\r\n      );\r\n      // console.log(res);\r\n    },\r\n    //添加取消收藏\r\n    addCollection() {\r\n      let postsrc = \"\";\r\n      if (this.topic.data.is_collect) {\r\n        postsrc = \"de_collect\";\r\n        this.topic.data.is_collect = false;\r\n      } else {\r\n        postsrc = \"collect\";\r\n        this.topic.data.is_collect = true;\r\n      }\r\n      axios.post(`/topic_collect/${postsrc}`, {\r\n        accesstoken: sessionStorage.getItem(\"accesstoken\"),\r\n        topic_id: this.topic.data.id,\r\n      });\r\n    },\r\n    //跳转编辑\r\n    clickEdit() {\r\n      this.getEditTopic(this.topic);\r\n      this.$router.push(\"/topic/create\");\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang='less'>\r\n.topic-long {\r\n  .topic-main {\r\n    .topic-top {\r\n      margin-top: 30px;\r\n      border-bottom: 1px solid #333;\r\n      padding: 8px 0;\r\n      padding-bottom: 15px;\r\n      span.type {\r\n        font-size: 12px;\r\n        padding: 2px 4px;\r\n        background-color: #6f7579;\r\n        color: white;\r\n        border-radius: 4px;\r\n        margin-right: 10px;\r\n      }\r\n      span.title {\r\n        font-size: 22px;\r\n        font-weight: 700;\r\n        margin: 8px 0;\r\n        line-height: 35px;\r\n      }\r\n      .title-bottom {\r\n        display: flex;\r\n        justify-content: space-between;\r\n        // line-height: 40px;\r\n        button {\r\n          margin-top: 7px;\r\n          height: 28px;\r\n          font-size: 12px;\r\n          line-height: 14px;\r\n          padding: 5px 10px;\r\n        }\r\n      }\r\n      .edit-topic {\r\n        span {\r\n          margin-left: 8px;\r\n          cursor: pointer;\r\n          color: #838383;\r\n          font-weight: 500;\r\n        }\r\n        span:hover {\r\n          color: #333;\r\n        }\r\n      }\r\n      ul {\r\n        margin: 5px 0;\r\n        padding: 0;\r\n        li {\r\n          margin: 8px;\r\n          list-style: disc;\r\n          list-style-position: inside;\r\n          display: inline-block;\r\n          font-size: 12px;\r\n          color: #838383;\r\n          line-height: 16px;\r\n          span {\r\n            display: inline-block;\r\n            margin-bottom: 3px;\r\n            margin-right: 4px;\r\n            width: 4px;\r\n            height: 4px;\r\n            border-radius: 4px;\r\n            background-color: #838383;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .topic-content {\r\n      color: #333;\r\n      .markdown-text {\r\n        p {\r\n          line-height: 1.7em;\r\n          font-size: 15px;\r\n        }\r\n        ul {\r\n          li {\r\n            font-size: 14px;\r\n            list-style: disc;\r\n            line-height: 28px;\r\n          }\r\n        }\r\n        h1,\r\n        h2 {\r\n          border-bottom: 1px solid #eee;\r\n          line-height: 40px;\r\n        }\r\n        img {\r\n          max-width: 100%;\r\n          height: auto;\r\n        }\r\n        a {\r\n          color: #6f7579;\r\n        }\r\n        a:hover {\r\n          text-decoration: underline;\r\n        }\r\n      }\r\n    }\r\n    .topic-comments {\r\n      margin-top: 30px;\r\n      .main-cuntent {\r\n        border: 1px solid #ccc;\r\n        .topic-comment {\r\n          border-top: 1px solid #f0f0f0;\r\n          .author-cuntent {\r\n            position: relative;\r\n            padding: 10px;\r\n            display: flex;\r\n            justify-content: space-between;\r\n            img {\r\n              width: 30px;\r\n              height: 30px;\r\n              border-radius: 3px;\r\n            }\r\n            .user-info {\r\n              position: absolute;\r\n              top: 10px;\r\n              left: 50px;\r\n              display: inline-block;\r\n              font-size: 12px;\r\n              .name {\r\n                color: #666;\r\n                font-weight: 700;\r\n              }\r\n              .name:hover {\r\n                color: #385f8a;\r\n              }\r\n              .time {\r\n                color: #08c;\r\n              }\r\n              .time:hover {\r\n                text-decoration: underline;\r\n              }\r\n              .ifauthor {\r\n                margin-left: 10px;\r\n                padding: 2px 5px;\r\n                border-radius: 3px;\r\n                color: white;\r\n                background-color: #6f7579;\r\n              }\r\n            }\r\n            .author-right {\r\n              span {\r\n                color: #929790;\r\n                font-size: 14px;\r\n                font-weight: 600;\r\n                margin-right: 5px;\r\n              }\r\n              .el-icon-thumb,\r\n              .el-icon-chat-round {\r\n                cursor: pointer;\r\n              }\r\n              .active {\r\n                color: #000;\r\n              }\r\n            }\r\n          }\r\n          .reply-cuntent {\r\n            // overflow: hidden;\r\n            p {\r\n              padding-right: 15px;\r\n              padding-left: 32px;\r\n              margin-top: -20px;\r\n              margin-bottom: 25px;\r\n              img {\r\n                width: 100%;\r\n                height: auto;\r\n              }\r\n            }\r\n          }\r\n          .commentreply {\r\n            display: none;\r\n            padding-left: 50px;\r\n            .tox-tinymce {\r\n              border: none;\r\n              border-top: 1px solid #ccc;\r\n            }\r\n            .tox-statusbar {\r\n              display: none;\r\n            }\r\n            .editor-buttom {\r\n              height: 40px;\r\n              padding-right: 15px;\r\n              margin-bottom: 15px;\r\n              button {\r\n                float: right;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .add-comment {\r\n      margin-top: 30px;\r\n      .editor-buttom {\r\n        padding: 8px 0;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>"]}]}